{% extends "nav.html" %}

{% block title %}Home Page{% endblock %}

{% block content %}
<style>
    /* Center the swiper div */
    .swiper-container {
      display: flex;
      justify-content: center; /* Center horizontally */
      align-items: center; /* Center vertically */
      height: 60vh; /* Full viewport height */
    }
  
    .swiper {
      width: 80%; /* Adjust width as needed */
      max-width: 800px; /* Optional: set a max width */
      background: white; /* White background for the form */
      border-radius: 10px; /* Rounded corners */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Subtle shadow */
      padding: 20px; /* Padding around the content */
    }
  
    h1 {
      text-align: center; /* Center the title */
      color: #333; /* Darker text color */
      margin-bottom: 20px; /* Space below the title */
    }
  
    .form-group {
      margin-bottom: 15px;
      display: flex; /* Use flexbox for alignment */
      flex-wrap: wrap; /* Allow wrapping to the next line */
    }
  
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold; /* Bold labels */
      color: #555; /* Darker label color */
      width: 100%; /* Full width for labels */
    }
  
    .input-container {
      flex: 1; /* Allow inputs to grow */
      min-width: 200px; /* Minimum width for inputs */
      margin-right: 10px; /* Space between columns */
    }
  
    .input-container:last-child {
      margin-right: 0; /* Remove margin for the last item */
    }
  
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc; /* Light border */
      border-radius: 5px; /* Rounded corners */
      box-sizing: border-box; /* Ensure padding is included in width */
      transition: border-color 0.3s; /* Smooth transition for border color */
    }
  
    input:focus, select:focus {
      border-color: #007bff; /* Change border color on focus */
      outline: none; /* Remove default outline */
    }
  
    button {
      background-color: #007bff; /* Primary button color */
      color: white; /* White text */
      border: none; /* Remove border */
      border-radius: 5px; /* Rounded corners */
      padding: 10px; /* Padding for the button */
      cursor: pointer; /* Pointer cursor on hover */
      width: 100%; /* Full width */
      transition: background-color 0.3s; /* Smooth transition for background color */
    }
  
    button:hover {
      background-color: #0056b3; /* Darker shade on hover */
    }
  
    /* Optional: Add some spacing for the particles */
    .particles {
      margin-top: 20px;
    }
  </style>
<div class="swiper-container">
    <div class="swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="content">
            <h1>International Plan Details</h1>
            <form id="prediction-form">
                <div class="form-group">
                  <label for="account-length">Account Length</label>
                  <input type="number" id="account-length" name="account-length" required>
                </div>
                <div class="form-group">
                  <label for="number-vmail-messages">Number Vmail Messages</label>
                  <input type="number" id="number-vmail-messages" name="number-vmail-messages" required>
                </div>
                <div class="form-group">
                  <label for="total-day-minutes">Total Day Minutes</label>
                  <input type="number" id="total-day-minutes" name="total-day-minutes" required>
                </div>
                <div class="form-group">
                  <label for="total-day-charge">Total Day Charge</label>
                  <input type="number" id="total-day-charge" name="total-day-charge" required>
                </div>
                <div class="form-group">
                  <label for="total-eve-calls">Total Eve Calls</label>
                  <input type="number" id="total-eve-calls" name="total-eve-calls" required>
                </div>
                <div class="form-group">
                  <label for="state-wa">State WA</label>
                  <select id="state-wa" name="state-wa" required>
                    <option value="1">Yes</option>
                    <option value="0">No</option>
                  </select>
                </div>
                <button type="submit">Submit</button>
              </form>
          </div>

        </div>
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
<ul style="z-index: -99;" class="particles">
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 22"></li>
    <li style="--i: 23"></li>
    <li style="--i: 24"></li>
    <li style="--i: 25"></li>
    <li style="--i: 26"></li>
    <li style="--i: 27"></li>
  </ul>
  
  
  <script>
    document.getElementById('prediction-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent default form submission
  
      const formData = new FormData(this);
      const data = {
        features: [
          parseInt(formData.get('account-length')),
          parseInt(formData.get('number-vmail-messages')),
          parseFloat(formData.get('total-day-minutes')),
          parseFloat(formData.get('total-day-charge')),
          parseInt(formData.get('total-eve-calls')),
          parseInt(formData.get('state-wa'))
        ]
      };
  
      console.log(data);
  
      fetch('http://127.0.0.1:5000/predict', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data),
      })
      .then(response => response.json())
      .then(result => {
        console.log(result);
        localStorage.setItem('userData', result.predictions[0]);
        if (result.predictions[0] === 1) {
          window.location.href = '/cross';
        } else {
          window.location.href = '/approve';
        }
      })
      .catch(error => {
        console.error('Error:', error);
      });
    });
  </script>
{% endblock %}
