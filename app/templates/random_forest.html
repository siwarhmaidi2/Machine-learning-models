{% extends "nav.html" %}

{% block title %}Home Page{% endblock %}

{% block content %}
<style>
    .swiper-slide {
        overflow-y: auto; /* Allow vertical scrolling */
    }

    .content {
        overflow-y: auto; /* Allow vertical scrolling */
    }

    /* Center the swiper div */
    .swiper-container {
        display: flex;
        justify-content: center; /* Center horizontally */
        align-items: flex-start; /* Align items to the start vertically */
        height: 95vh; /* Full viewport height */
        overflow: auto; /* Enable scrolling if content overflows */
    }

    .swiper {
        width: 80%; /* Adjust width as needed */
        max-width: 800px; /* Optional: set a max width */
        background: white; /* White background for the form */
        border-radius: 10px; /* Rounded corners */
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Subtle shadow */
        padding: 20px; /* Padding around the content */
        overflow-y: auto; /* Allow vertical scrolling */
    }

    h1 {
        text-align: center; /* Center the title */
        color: #333; /* Darker text color */
        margin-bottom: 20px; /* Space below the title */
    }

    .form-group {
        margin-bottom: 15px;
        display: flex; /* Use flexbox for alignment */
        flex-wrap: wrap; /* Allow wrapping to the next line */
    }

    label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold; /* Bold labels */
        color: #555; /* Darker label color */
        width: 100%; /* Full width for labels */
    }

    .input-container {
        flex: 1; /* Allow inputs to grow */
        min-width: 150px; /* Minimum width for inputs */
        margin-right: 10px; /* Space between columns */
        margin-bottom: 10px; /* Space between rows */
    }

    .input-container:nth-child(3n) {
        margin-right: 0; /* Remove margin for every third item */
    }

    input, select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ccc; /* Light border */
        border-radius: 5px; /* Rounded corners */
        box-sizing: border-box; /* Ensure padding is included in width */
        transition: border-color 0.3s; /* Smooth transition for border color */
    }

    input:focus, select:focus {
        border-color: #007bff; /* Change border color on focus */
        outline: none; /* Remove default outline */
    }

    button {
        background-color: #007bff; /* Primary button color */
        color: white; /* White text */
        border: none; /* Remove border */
        border-radius: 5px; /* Rounded corners */
        padding: 10px; /* Padding for the button */
        cursor: pointer; /* Pointer cursor on hover */
        width: 100%; /* Full width */
        transition: background-color 0.3s; /* Smooth transition for background color */
    }

    button:hover {
        background-color: #0056b3; /* Darker shade on hover */
    }

    /* Optional: Add some spacing for the particles */
    .particles {
        margin-top: 20px;
    }
</style>
<div class="swiper-container">
    <div class="swiper">
        <div class="swiper-wrapper">
            <div class="swiper-slide">
                <div class="content">
                    <h1>International Plan Details</h1>
                    <form id="prediction-form">
                        <div class="form-group">
                            <div class="input-container">
                                <label for="state">State</label>
                                <input type="text" id="state" name="state" required>
                            </div>
                            <div class="input-container">
                                <label for="account-length">Account Length</label>
                                <input type="number" id="account-length" name="account-length" required>
                            </div>
                            <div class="input-container">
                                <label for="area-code">Area Code</label>
                                <input type="text" id="area-code" name="area-code" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="international-plan">International Plan</label>
                                <select id="international-plan" name="international-plan">
                                    <option value="basic"> Basic</option>
                                    <option value="premium">None</option>
                                </select>
                            </div>
                            <div class="input-container">
                                <label for="voice-mail-plan">Voice Mail Plan</label>
                                <select id="voice-mail-plan" name="voice-mail-plan">
                                    <option value="basic">Basic</option>
                                    <option value="none">None</option>
                                </select>
                            </div>
                            <div class="input-container">
                                <label for="number-vmail-messages">Number of Voicemail Messages</label>
                                <input type="number" id="number-vmail-messages" name="number-vmail-messages" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="total-day-minutes">Total Day Minutes</label>
                                <input type="number" id="total-day-minutes" name="total-day-minutes" required>
                            </div>
                            <div class="input-container">
                                <label for="total-day-calls">Total Day Calls</label>
                                <input type="number" id="total-day-calls" name="total-day-calls" required>
                            </div>
                            <div class="input-container">
                                <label for="total-day-charge">Total Day Charge</label>
                                <input type="number" id="total-day-charge" name="total-day-charge" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="total-eve-minutes">Total Evening Minutes</label>
                                <input type="number" id="total-eve-minutes" name="total-eve-minutes" required>
                            </div>
                            <div class="input-container">
                                <label for="total-eve-calls">Total Evening Calls</label>
                                <input type="number" id="total-eve-calls" name="total-eve-calls" required>
                            </div>
                            <div class="input-container">
                                <label for="total-eve-charge">Total Evening Charge</label>
                                <input type="number" id="total-eve-charge" name="total-eve-charge" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="total-night-minutes">Total Night Minutes</label>
                                <input type="number" id="total-night-minutes" name="total-night-minutes" required>
                            </div>
                            <div class="input-container">
                                <label for="total-night-calls">Total Night Calls</label>
                                <input type="number" id="total-night-calls" name="total-night-calls" required>
                            </div>
                            <div class="input-container">
                                <label for="total-night-charge">Total Night Charge</label>
                                <input type="number" id="total-night-charge" name="total-night-charge" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="total-intl-minutes">Total Intl Minutes</label>
                                <input type="number" id="total-intl-minutes" name="total-intl-minutes" required>
                            </div>
                            <div class="input-container">
                                <label for="total-intl-calls">Total Intl Calls</label>
                                <input type="number" id="total-intl-calls" name="total-intl-calls" required>
                            </div>
                            <div class="input-container">
                                <label for="total-intl-charge">Total Intl Charge</label>
                                <input type="number" id="total-intl-charge" name="total-intl-charge" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="input-container">
                                <label for="customer-service-calls">Customer Service Calls</label>
                                <input type="number" id="customer-service-calls" name="customer-service-calls" required>
                            </div>
                        </div>
                        <button type="submit">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
<ul style="z-index: -99;" class="particles">
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 22"></li>
    <li style="--i: 23"></li>
    <li style="--i: 24"></li>
    <li style="--i: 25"></li>
    <li style="--i: 26"></li>
    <li style="--i: 27"></li>
  </ul>
  
  
  <script>
    document.getElementById('prediction-form').addEventListener('submit', function(event) {
        event.preventDefault(); // Prevent the default form submission

        const formData = new FormData(this);
        const data = {
            features: [
                formData.get('state'),
                formData.get('account-length'),
                formData.get('area-code'),
                formData.get('international-plan') === 'basic' ? 1 : 0, // Example encoding for categorical data
                formData.get('voice-mail-plan') === 'basic' ? 1 : 0, // Example encoding for categorical data
                formData.get('number-vmail-messages'),
                formData.get('total-day-minutes'),
                formData.get('total-day-calls'),
                formData.get('total-day-charge'),
                formData.get('total-eve-minutes'),
                formData.get('total-eve-calls'),
                formData.get('total-eve-charge'),
                formData.get('total-night-minutes'),
                formData.get('total-night-calls'),
                formData.get('total-night-charge'),
                formData.get('total-intl-minutes'),
                formData.get('total-intl-calls'),
                formData.get('total-intl-charge'),
                formData.get('customer-service-calls'),
                
               
                
            ]
        };
        console.log(data);
        fetch('http://127.0.0.1:5000/predictV2/model_random_forest', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(data),
        })
        .then(response => response.json())
        .then(result => {
            console.log(result.prediction[0]);
            localStorage.setItem('userData', result.prediction[0]);
            if (result.prediction[0] === true) {
                // Redirect to 'cross.html' if prediction is true
                window.location.href = '/cross';
            } else {
                // Redirect to 'approve.html' if prediction is false
                window.location.href = '/approve';
            }
        })
        .catch(error => {
            console.error('Error:', error);
        });
    });
</script>
{% endblock %}
