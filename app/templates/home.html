{% extends "nav.html" %}

{% block title %}Home Page{% endblock %}

{% block content %}
<style>
    /* Center the swiper div */
    .swiper-container {
      display: flex;
      justify-content: center; /* Center horizontally */
      align-items: center; /* Center vertically */
      height: 60vh; /* Full viewport height */
    }
  
    .swiper {
      width: 80%; /* Adjust width as needed */
      max-width: 800px; /* Optional: set a max width */
      background: white; /* White background for the form */
      border-radius: 10px; /* Rounded corners */
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Subtle shadow */
      padding: 20px; /* Padding around the content */
    }
  
    h1 {
      text-align: center; /* Center the title */
      color: #333; /* Darker text color */
      margin-bottom: 20px; /* Space below the title */
    }
  
    .form-group {
      margin-bottom: 15px;
      display: flex; /* Use flexbox for alignment */
      flex-wrap: wrap; /* Allow wrapping to the next line */
    }
  
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold; /* Bold labels */
      color: #555; /* Darker label color */
      width: 100%; /* Full width for labels */
    }
  
    .input-container {
      flex: 1; /* Allow inputs to grow */
      min-width: 200px; /* Minimum width for inputs */
      margin-right: 10px; /* Space between columns */
    }
  
    .input-container:last-child {
      margin-right: 0; /* Remove margin for the last item */
    }
  
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc; /* Light border */
      border-radius: 5px; /* Rounded corners */
      box-sizing: border-box; /* Ensure padding is included in width */
      transition: border-color 0.3s; /* Smooth transition for border color */
    }
  
    input:focus, select:focus {
      border-color: #007bff; /* Change border color on focus */
      outline: none; /* Remove default outline */
    }
  
    button {
      background-color: #007bff; /* Primary button color */
      color: white; /* White text */
      border: none; /* Remove border */
      border-radius: 5px; /* Rounded corners */
      padding: 10px; /* Padding for the button */
      cursor: pointer; /* Pointer cursor on hover */
      width: 100%; /* Full width */
      transition: background-color 0.3s; /* Smooth transition for background color */
    }
  
    button:hover {
      background-color: #0056b3; /* Darker shade on hover */
    }
  
    /* Optional: Add some spacing for the particles */
    .particles {
      margin-top: 20px;
    }
  </style>
<div class="swiper-container">
    <div class="swiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="content">
            <h1>International Plan Details</h1>
            <form id="prediction-form">
              <div class="form-group">
                <label for="international-plan">International Plan</label>
                <select id="international-plan" name="international-plan">
                  <option value="basic">Basic</option>
                  <option value="premium">None</option>
                </select>
              </div>
              <div class="form-group">
                <label for="total-day-minutes">Total Day Minutes</label>
                <input type="number" id="total-day-minutes" name="total-day-minutes" required>
              </div>
              <div class="form-group">
                <label for="customer-service-calls">Customer Service Calls</label>
                <input type="number" id="customer-service-calls" name="customer-service-calls" required>
            
                <label for="voice-mail-plan">Voice Mail Plan</label>
                <select id="voice-mail-plan" name="voice-mail-plan">
                  <option value="basic">Basic</option>
                 
                  <option value="none">None</option>
                </select>
              </div>
              <div class="form-group">
                <label for="total-intl-calls">Total Intl Calls</label>
                <input type="number" id="total-intl-calls" name="total-intl-calls" required>
             
                <label for="total-intl-minutes">Total Intl Minutes</label>
                <input type="number" id="total-intl-minutes" name="total-intl-minutes" required>
              </div>
              <button type="submit">Submit</button>
            </form>
          </div>

        </div>
      </div>
      <div class="swiper-pagination"></div>
    </div>
  </div>
<ul style="z-index: -99;" class="particles">
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 11"></li>
    <li style="--i: 12"></li>
    <li style="--i: 13"></li>
    <li style="--i: 14"></li>
    <li style="--i: 15"></li>
    <li style="--i: 16"></li>
    <li style="--i: 17"></li>
    <li style="--i: 18"></li>
    <li style="--i: 19"></li>
    <li style="--i: 20"></li>
    <li style="--i: 21"></li>
    <li style="--i: 22"></li>
    <li style="--i: 23"></li>
    <li style="--i: 24"></li>
    <li style="--i: 25"></li>
    <li style="--i: 26"></li>
    <li style="--i: 27"></li>
  </ul>
  <script>
    document.getElementById('prediction-form').addEventListener('submit', function(event) {
      event.preventDefault(); // Prevent the default form submission
  
      const formData = new FormData(this);
      const data = {
        features: [
        formData.get('international-plan') === 'basic' ? 1 : 0, // Example encoding for categorical data

          formData.get('total-day-minutes'),
          formData.get('customer-service-calls'),
          formData.get('voice-mail-plan') === 'basic' ? 1 : 0, // Example encoding for categorical data

          formData.get('total-intl-calls'),
          formData.get('total-intl-minutes'),
        ]
      };
      console.log(data)
      fetch('http://127.0.0.1:5000/predict/model_knn', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(data),
        
        
      })
      .then(response => response.json())
      .then(result => {
        console.log(result.prediction[0])
        localStorage.setItem('userData', result.prediction[0]);
        if (result.prediction[0] === true) {
        // Redirect to 'cross.html' if prediction is true
        window.location.href = '/cross';
      } else {
        // Redirect to 'approve.html' if prediction is false
        window.location.href = '/approve';
      }
     })
      .catch(error => {
        console.error('Error:', error);
      });
    });
  </script>
{% endblock %}
